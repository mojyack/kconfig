set arch amd64
include frag/general

# arch
include frag/arch/x86/amd64
CONFIG_CPU_SUP_INTEL=y
CONFIG_MNATIVE_INTEL=y
CONFIG_NR_CPUS=72
CONFIG_X86_MCE_INTEL=y

# boot
CONFIG_CMDLINE_BOOL=y
CONFIG_CMDLINE="root=PARTUUID=90169c88-9336-4a54-b8a1-249acc9cb2d2 rw loglevel=3 mitigations=off fsck.mode=skip"

include frag/arch/x86/efi
CONFIG_EFI_STUB=y

# thermal
CONFIG_INTEL_POWERCLAMP=m
CONFIG_X86_PKG_TEMP_THERMAL=m

# perf
CONFIG_PERF_EVENTS_INTEL_UNCORE=m
CONFIG_PERF_EVENTS_INTEL_RAPL=m
CONFIG_PERF_EVENTS_INTEL_CSTATE=m

# acpi
include frag/drivers/acpi
CONFIG_INTEL_IDLE=y

include frag/fs/nfs
include frag/extra/gentoo

### drivers ###
# pci
include frag/drivers/pci

# mfd
CONFIG_LPC_ICH=m
CONFIG_MFD_SYSCON=y

# i2c
CONFIG_I2C_SMBUS=m
CONFIG_I2C_I801=m

# block
include frag/drivers/nvme
include frag/extra/sata-rootfs

# ethernet
CONFIG_ETHERNET=y
CONFIG_NET_VENDOR_REALTEK=y
CONFIG_R8169=m
CONFIG_REALTEK_PHY=m

# gpu
include frag/drivers/drm/nouveau

# sound
include frag/drivers/sound/hda
CONFIG_SND_HDA_GENERIC=m

include frag/drivers/sound/usb

# usb
CONFIG_USB_XHCI_HCD=m
CONFIG_USB_EHCI_HCD=m
CONFIG_USB_EHCI_TT_NEWSCHED=y

# edac
CONFIG_EDAC=m
CONFIG_EDAC_SBRIDGE=m

# rtc
include frag/drivers/rtc
CONFIG_RTC_DRV_CMOS=m

# platform
CONFIG_ACPI_WMI=m

# powercap
CONFIG_POWERCAP=y
CONFIG_INTEL_RAPL=m
